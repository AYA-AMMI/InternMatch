{% extends 'company/base.html.twig' %} {% block title %}My Internships -
InternMatch{% endblock %} {% block company_content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col">
            <h1 class="h3 mb-0">My Internships</h1>
            <p class="text-muted">Manage your internship postings</p>
        </div>
        <div class="col-auto">
            <a
                href="{{ path('company_internship_create') }}"
                class="btn btn-primary"
            >
                <i class="fas fa-plus me-2"></i>
                Create New Internship
            </a>
        </div>
    </div>

    {% if internships is empty %}
    <div class="card border-0 shadow-sm">
        <div class="card-body text-center py-5">
            <i class="fas fa-briefcase fa-4x text-muted mb-4"></i>
            <h4>No Internships Posted Yet</h4>
            <p class="text-muted mb-4">
                Start by creating your first internship posting to attract
                talented students.
            </p>
            <a
                href="{{ path('company_internship_create') }}"
                class="btn btn-primary"
            >
                <i class="fas fa-plus me-2"></i>
                Create Your First Internship
            </a>
        </div>
    </div>
    {% else %}
    <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light">
                        <tr>
                            <th class="ps-4">Title</th>
                            <th>Location</th>
                            <th>Duration</th>
                            <th>Posted Date</th>
                            <th>Applications</th>
                            <th>Status</th>
                            <th class="pe-4 text-end">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for internship in internships %}
                        <tr>
                            <td class="ps-4">
                                <strong>{{ internship.title }}</strong>
                                <br />
                                <small class="text-muted">
                                    {% for skill in
                                    internship.requiredSkills|slice(0, 3) %}
                                    <span
                                        class="badge bg-light text-dark me-1"
                                        >{{ skill }}</span
                                    >
                                    {% endfor %} {% if
                                    internship.requiredSkills|length > 3 %}
                                    <span class="badge bg-light text-dark"
                                        >+{{ internship.requiredSkills|length - 3 }}</span
                                    >
                                    {% endif %}
                                </small>
                            </td>
                            <td>
                                <i
                                    class="fas fa-map-marker-alt text-muted me-1"
                                ></i>
                                {{ internship.location }}
                            </td>
                            <td>{{ internship.duration }} months</td>
                            <td>
                                <small
                                    >{{ internship.postedAt|date('M d, Y') }}</small
                                >
                            </td>
                            <td>
                                <span class="badge bg-primary">
                                    {{ internship.applications | length }}
                                    Applications
                                </span>
                            </td>
                            <td>
                                <span
                                    class="badge status-badge status-{{
                                        internship.status
                                    }}"
                                >
                                    {% if internship.status == 'active' %}
                                    <i class="fas fa-check-circle me-1"></i>
                                    {% else %}
                                    <i class="fas fa-lock me-1"></i>
                                    {% endif %}
                                    {{ internship.status | upper }}
                                </span>
                            </td>
                            <td class="pe-4 text-end">
                                <div class="btn-group" role="group">
                                    <a
                                        href="{{
                                            path('company_internship_edit', {
                                                id: internship.id
                                            })
                                        }}"
                                        class="btn btn-sm btn-outline-primary"
                                        data-bs-toggle="tooltip"
                                        title="Edit"
                                    >
                                        <i class="fas fa-edit"></i>
                                    </a>

                                    <form
                                        method="post"
                                        action="{{
                                            path(
                                                'company_internship_toggle_status',
                                                { id: internship.id }
                                            )
                                        }}"
                                        class="d-inline"
                                    >
                                        <button
                                            type="submit"
                                            class="btn btn-sm btn-outline-warning"
                                            data-bs-toggle="tooltip"
                                            title="{{
                                                internship.status == 'active'
                                                    ? 'Close'
                                                    : 'Activate'
                                            }}"
                                        >
                                            <i
                                                class="fas fa-{{
                                                    internship.status ==
                                                    'active'
                                                        ? 'lock'
                                                        : 'unlock'
                                                }}"
                                            ></i>
                                        </button>
                                    </form>

                                    {# Bouton Delete #}
                                    <button
                                        type="button"
                                        class="btn btn-sm btn-danger"
                                        data-bs-toggle="modal"
                                        data-bs-target="#deleteInternshipModal{{
                                            internship.id
                                        }}"
                                    >
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <div
                            class="modal fade"
                            id="deleteInternshipModal{{ internship.id }}"
                            tabindex="-1"
                            aria-hidden="true"
                        >
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div
                                        class="modal-header bg-danger text-white"
                                    >
                                        <h5 class="modal-title">
                                            <i class="fas fa-trash"></i> Delete
                                            Internship
                                        </h5>
                                        <button
                                            type="button"
                                            class="btn-close btn-close-white"
                                            data-bs-dismiss="modal"
                                            aria-label="Close"
                                        ></button>
                                    </div>

                                    <div class="modal-body">
                                        <p>
                                            <strong
                                                >Are you sure you want to delete
                                                this internship?</strong
                                            >
                                        </p>

                                        <div
                                            class="internship-summary mb-3 p-3 bg-light rounded"
                                        >
                                            <h6 class="mb-2">
                                                {{ internship.title }}
                                            </h6>
                                            <p class="mb-1 text-muted">
                                                <i
                                                    class="fas fa-map-marker-alt"
                                                ></i>
                                                {{ internship.location }}
                                            </p>
                                            <p class="mb-0 text-muted">
                                                <i class="fas fa-calendar"></i>
                                                Posted on
                                                {{ internship.postedAt|date('M d, Y') }}
                                            </p>
                                        </div>

                                        {% if internship.applications|length > 0
                                        %}
                                        <div class="alert alert-danger mb-0">
                                            <i
                                                class="fas fa-exclamation-triangle"
                                            ></i>
                                            <strong>Warning:</strong> This
                                            internship has
                                            {{
                                                internship.applications | length
                                            }}
                                            application(s). All will be
                                            permanently deleted!
                                        </div>
                                        {% else %}
                                        <div class="alert alert-info mb-0">
                                            <i class="fas fa-info-circle"></i>
                                            No applications yet. Safe to delete.
                                        </div>
                                        {% endif %}
                                    </div>

                                    <div class="modal-footer">
                                        <button
                                            type="button"
                                            class="btn btn-secondary"
                                            data-bs-dismiss="modal"
                                        >
                                            <i class="fas fa-times"></i> Cancel
                                        </button>
                                        <form
                                            method="POST"
                                            action="{{
                                                path(
                                                    'company_internship_delete',
                                                    { id: internship.id }
                                                )
                                            }}"
                                            style="display: inline"
                                        >
                                            <button
                                                type="submit"
                                                class="btn btn-danger"
                                            >
                                                <i class="fas fa-trash"></i>
                                                Delete Internship
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %} {% block stylesheets %}
{{ parent() }}
<link rel="stylesheet" href="{{ asset('css/company/internships.css') }}" />
{% endblock %} {% block javascripts %}
{{ parent() }}
<script src="{{ asset('js/company/internships.js') }}"></script>

{% endblock %}
